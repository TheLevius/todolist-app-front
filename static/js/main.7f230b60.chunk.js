(this["webpackJsonptodolist-app-front"]=this["webpackJsonptodolist-app-front"]||[]).push([[0],{1899:function(t,e,n){"use strict";n.r(e);var a,r,c,i=n(0),s=n.n(i),o=n(29),l=n.n(o),d=(n(224),n(225),n(226),n(25)),u=n(28),p=n.n(u),j=n(43),f=n(14),b=n(206),O=n.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"83ff2ca7-a319-4045-8f15-c83797dc9c95"}}),x=function(){return O.get("auth/me")},h=function(){return O.get("todo-lists")},y=function(t){return O.post("todo-lists",{title:t})},g=function(t){return O.delete("todo-lists/".concat(t))},v=function(t,e){return O.put("todo-lists/".concat(t),{title:e})},m=function(t){return O.get("todo-lists/".concat(t,"/tasks"))},T=function(t,e){return O.post("todo-lists/".concat(t,"/tasks"),{title:e})},S=function(t,e){return O.delete("todo-lists/".concat(t,"/tasks/").concat(e))},I=function(t,e,n){return O.put("todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={})),function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(c||(c={}));var D=function(t,e){t.messages.length?e(L.errorDetectedAC(t.messages[0])):e(L.errorDetectedAC("Some error occured")),e(L.statusChangedAC("failed"))},A=function(t,e){e(L.errorDetectedAC(t.message?t.message:"Some error occured")),e(L.statusChangedAC("failed"))},C={status:"idle",isLoggedIn:!0,isInitialized:!1,error:null},L={statusChangedAC:function(t){return{type:"APP/STATUS_CHANGED",payload:{status:t}}},isInitializedChangedAC:function(t){return{type:"APP/ISINITIALIZED_CHANGED",payload:{isInitialized:t}}},isLoggedInChangedAC:function(t){return{type:"APP/IS_LOGGED_IN_CHANGED",payload:{isLoggedIn:t}}},errorDetectedAC:function(t){return{type:"APP/ERROR_DETECTED",payload:{error:t}}}},E=n(216),k=n(1907),w=n(1902),_=n(57),N=[],P=function(t){return{type:"TODOLIST/ADDED_TODOLIST",payload:t}},z=function(t){return{type:"TODOLIST/DELETED_TODOLIST",payload:{todolistId:t}}},K=function(t,e){return{type:"TODOLIST/CHANGED_TODOLIST_TITLE",payload:{todolistId:t,title:e}}},H=function(t,e){return{type:"TODOLIST/CHANGED_TODOLIST_FILTER",payload:{todolistId:t,filter:e}}},G=function(t){return{type:"TODOLIST/SETTLED_TODOLISTS",payload:{todolists:t}}},R=n(81),F=n.n(R),U=n.p+"static/media/fistify-logo.7b04169f.svg",B=n(122),W=n.n(B),Z=n(92),J=n(119),M=n(217),q=n(76),Y=n(207),Q=n.n(Y),V=n(7),X=function(t){var e=t.bordered,n=void 0===e||e,a=t.addItem,r=(Object(J.a)(t,["bordered","addItem"]),Object(i.useState)("")),c=Object(Z.a)(r,2),s=c[0],o=c[1],l=function(t){"Enter"!==t.key&&"blur"!==t.type||""!==s.trim()&&(a(s),o(""))};return Object(V.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(V.jsx)(Q.a,{onKeyPress:l,onBlur:l,placeholder:"Add task",value:s,bordered:n,onChange:function(t){o(t.target.value)}}),Object(V.jsx)(M.a,{style:{marginLeft:"8px"},type:"text",icon:Object(V.jsx)(q.PlusCircleFilled,{style:{color:"#2999ff",fontSize:"18px"}}),shape:"circle"})]})},$=n(1904),tt=n(1906),et=n(215),nt=n.n(et),at=n(1905),rt=n(218),ct=n(99),it=n.n(ct),st=n(1903).a.Text,ot=function(t){var e=t.onTitleChange,n=t.title,a=void 0===n?"empty":n,r=t.strong,c=void 0!==r&&r,s=t.bordered,o=void 0===s||s,l=t.style,d=(Object(J.a)(t,["onTitleChange","title","strong","bordered","style"]),Object(i.useState)(!1)),u=Object(Z.a)(d,2),p=u[0],j=u[1],b=Object(i.useState)(a||"undefined"),O=Object(Z.a)(b,2),x=O[0],h=O[1],y=function(t){"Enter"!==t.key&&"blur"!==t.type||(""!==x?(e(x),j((function(t){return!t}))):(h(a||"empty"),j((function(t){return!t}))))};return p?Object(V.jsx)(at.a,{value:x,onKeyPress:y,suffix:Object(V.jsx)(rt.a,{}),onChange:function(t){h(t.target.value)},onBlur:y,bordered:o,autoFocus:!0,style:Object(f.a)({},l)}):Object(V.jsx)(it.a,{type:"text",block:!0,onClick:function(t){j((function(t){return!t}))},style:Object(f.a)({},l),children:Object(V.jsx)(st,{strong:c,style:{width:"100%",textOverflow:"ellipsis",overflow:"hidden"},children:x})})},lt=n(212),dt=n.n(lt),ut=n(66),pt={},jt=function(t,e){return{type:"TASKS/SET_TASKS",payload:{todolistId:t,tasks:e}}},ft=function(t){return{type:"TASKS/ADDED_TASK",payload:{task:t}}},bt=function(t,e){return{type:"TASKS/DELETED_TASK",payload:{todolistId:t,taskId:e}}},Ot=function(t){return{type:"TASKS/UPDATED_TASK",payload:{model:t}}},xt=function(t,e,n){return function(){var a=Object(j.a)(p.a.mark((function a(r,i){var s,o,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=i().tasks[t].filter((function(t){return t.id===e}))[0],a.prev=1,a.next=4,I(t,e,n);case 4:o=a.sent,(l=o.data).resultCode===c.Success?r(Ot(l.data)):D(l,r),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),s&&r(Ot(Object(f.a)(Object(f.a)({},s),n))),A(a.t0,r);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(t,e){return a.apply(this,arguments)}}()},ht=s.a.memo((function(t){var e=t.task,n=Object(d.c)();return Object(V.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"8px 0"},children:[Object(V.jsx)(dt.a,{checked:e.status===a.Completed,onChange:function(t){var r=Object(f.a)(Object(f.a)({},e),{},{status:t.target.checked?a.Completed:a.New});n(xt(e.todoListId,e.id,r))},style:{marginRight:"16px"}}),Object(V.jsx)(ot,{onTitleChange:function(t){var a=Object(f.a)(Object(f.a)({},e),{},{title:t});n(xt(e.todoListId,e.id,a))},title:e.title,bordered:!0,style:{marginLeft:"-8px",paddingLeft:"8px",textAlign:"left"}}),Object(V.jsx)(M.a,{onClick:function(){var t,a;n((t=e.todoListId,a=e.id,function(){var e=Object(j.a)(p.a.mark((function e(n){var r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t,a);case 3:r=e.sent,(i=r.data).resultCode===c.Success?Object(d.b)((function(){n(bt(t,a))})):D(i,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A(e.t0,n);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},type:"text",style:{marginLeft:"8px"},icon:Object(V.jsx)(q.DeleteFilled,{style:{color:"#c8c8c8",fontSize:"18px"}}),shape:"circle"})]})})),yt=n(213),gt=n.n(yt),vt=s.a.memo((function(t){var e=t.id,n=t.title,r=t.filter,s=Object(d.c)(),o=Object(d.d)((function(t){return function(t,e,n){return t.tasks[e]?"all"===n?t.tasks[e]:t.tasks[e].filter((function(t){return"active"===n?t.status===a.New:"completed"!==n||t.status===a.Completed})):null}(t,e,r)}));Object(i.useEffect)((function(){var t;s((t=e,function(){var e=Object(j.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(t);case 3:a=e.sent,r=a.data,Object(d.b)((function(){n(jt(t,r.items))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A(e.t0,n);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}),[s,e]);return null===o?Object(V.jsx)(k.b,{size:"large",children:Object(V.jsx)(w.a,{size:"large",tip:"Initialize..."})}):(console.log("todolist render"),Object(V.jsx)(nt.a,{bodyStyle:{height:"100%",display:"flex",justifyContent:"space-between",flexDirection:"column"},className:"".concat(gt.a.card),title:Object(V.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(V.jsx)(ot,{onTitleChange:function(t){s(function(t,e){return function(){var n=Object(j.a)(p.a.mark((function n(a){var r,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v(t,e);case 3:r=n.sent,(i=r.data).resultCode===c.Success?Object(d.b)((function(){K(t,e)})):D(i,a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),A(n.t0,a);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(t){return n.apply(this,arguments)}}()}(e,t))},title:n,bordered:!1,strong:!0,style:{marginLeft:"0",paddingLeft:"0",fontSize:"20px",lineHeight:"1",textAlign:"left",overflow:"hidden"}}),Object(V.jsx)(M.a,{onClick:function(){var t;s((t=e,function(){var e=Object(j.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t);case 3:a=e.sent,(r=a.data).resultCode===c.Success?n(z(t)):D(r,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A(e.t0,n);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},type:"text",icon:Object(V.jsx)(q.DeleteFilled,{style:{color:"#c8c8c8",fontSize:"18px"}}),shape:"circle"})]}),bordered:!1,children:Object(V.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:Object(V.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"100%"},children:[Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{style:{marginBottom:"16px"},children:Object(V.jsx)(X,{addItem:function(t){s(function(t,e){return function(){var n=Object(j.a)(p.a.mark((function n(a){var r,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(t,e);case 3:r=n.sent,(i=r.data).resultCode===c.Success?Object(d.b)((function(){a(ft(i.data.item))})):D(i,a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),A(n.t0,a);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(t){return n.apply(this,arguments)}}()}(e,t))}})}),Object(V.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:!!o&&o.map((function(t){return Object(V.jsx)(ht,{task:t},t.id)}))})]}),Object(V.jsx)("div",{style:{margin:"16px 0"},children:Object(V.jsxs)(tt.a.Group,{style:{display:"flex"},onChange:function(t){s(H(e,t.target.value.toLowerCase()))},children:[Object(V.jsx)(tt.a.Button,{value:"All",children:"All"}),Object(V.jsx)(tt.a.Button,{value:"Active",children:"Active"}),Object(V.jsx)(tt.a.Button,{value:"Completed",children:"Completed"})]})})]})})}))})),mt=function(){var t=Object(d.d)((function(t){return t.todolist?t.todolist:null}));return t?(console.log("todolist mapping"),Object(V.jsx)(V.Fragment,{children:t.map((function(t){return Object(V.jsx)(vt,{title:t.title,id:t.id,filter:t.filter},t.id)}))})):(console.log("spinners"),Object(V.jsx)(k.b,{size:"large",children:Object(V.jsx)(w.a,{size:"large",tip:"Initialize..."})}))},Tt=function(t){var e=Object(d.c)();return Object(i.useEffect)((function(){e(function(){var t=Object(j.a)(p.a.mark((function t(e){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h();case 3:n=t.sent,a=n.data,e(G(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),A(t.t0,e);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())}),[e]),console.log("TodolistsPage"),Object(V.jsxs)(F.a,{className:"layout",style:{minHeight:"100vh"},children:[Object(V.jsxs)(R.Header,{style:{display:"flex",backgroundColor:"#6d8aa8"},children:[Object(V.jsx)("img",{src:U,alt:"fastify logotype",style:{maxWidth:"32px",marginRight:"8px"}}),Object(V.jsx)("h3",{style:{color:"#fff"},children:"Todolist Application"})]}),Object(V.jsxs)(R.Content,{className:"site-layout-content",style:{width:"100%",padding:"0 50px",margin:"0 auto"},children:[Object(V.jsxs)(W.a,{style:{margin:"16px 8px"},children:[Object(V.jsx)(W.a.Item,{children:"Home"}),Object(V.jsx)(W.a.Item,{children:"App"})]}),Object(V.jsxs)("div",{className:"site-layout-background",style:{flexDirection:"column",maxWidth:"1200px"},children:[Object(V.jsx)($.a,{style:{margin:"8px"},bordered:!1,children:Object(V.jsx)(X,{addItem:function(t){e(function(t){return function(){var e=Object(j.a)(p.a.mark((function e(n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(t);case 3:a=e.sent,(r=a.data).resultCode===c.Success?n(P(r.data.item)):D(r,n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),A(e.t0,n);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(t))}})}),Object(V.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},children:Object(V.jsx)(mt,{})})]})]}),Object(V.jsx)(R.Footer,{style:{textAlign:"center"},children:"Todolist Application \xa92021 Created by Nikita Levitski"})]})},St=n(34),It=function(t){return Object(V.jsx)("div",{children:Object(V.jsx)("h1",{children:"Login Page"})})},Dt=function(t){return Object(V.jsx)("h1",{children:"Registration Page"})},At=function(){var t=Object(d.c)(),e=Object(d.d)((function(t){return t.app.isInitialized})),n=Object(d.d)((function(t){return t.app.status})),a=Object(d.d)((function(t){return t.app.error})),r="initializeNotificatoin",s=Object(i.useCallback)((function(t){"loading"===t?E.b.loading({content:"initializing!",key:r,duration:0,className:"custom-class",style:{marginTop:"20vh"}}):"succeeded"===t?E.b.success({content:"App Initialized!",key:r,duration:1,className:"custom-class",style:{marginTop:"20vh"}}):(null===a||void 0===a?void 0:a.length)&&"failed"===t?E.b.error({content:a,key:r,duration:5,className:"custom-class",style:{marginTop:"20vh"}}):"failed"===t&&E.b.warning({content:a||"Some app error",key:r,duration:3,className:"custom-class",style:{marginTop:"20vh"}})}),[a]);return Object(i.useEffect)((function(){e||(console.log("initialization requested, status: ".concat(e)),t(function(){var t=Object(j.a)(p.a.mark((function t(e){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(L.statusChangedAC("loading")),t.next=4,x();case 4:n=t.sent,(a=n.data).resultCode===c.Success?Object(d.b)((function(){e(L.statusChangedAC("succeeded")),e(L.isLoggedInChangedAC(!0)),e(L.isInitializedChangedAC(!0))})):D(a,e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Object(d.b)((function(){A(t.t0,e)}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,e]),Object(i.useEffect)((function(){"idle"!==n&&(console.log("status: ",n),s(n))}),[t,n,s]),console.log("App rendered"),e?Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(St.d,{children:[Object(V.jsx)(St.b,{path:"/login",render:function(){return Object(V.jsx)(It,{})}}),Object(V.jsx)(St.b,{path:"/registration",render:function(){return Object(V.jsx)(Dt,{})}}),Object(V.jsx)(St.b,{path:"/",exact:!0,render:function(){return e?Object(V.jsx)(St.a,{to:"/todolists"}):Object(V.jsx)(St.a,{to:"/login"})}}),Object(V.jsx)(St.b,{path:"/todolists",render:function(){return Object(V.jsx)(Tt,{})}}),Object(V.jsx)(St.b,{path:"*",render:function(){return Object(V.jsx)("h1",{children:"404 Page not found"})}})]})}):Object(V.jsx)("div",{className:"App",children:Object(V.jsx)(k.b,{size:"large",children:Object(V.jsx)(w.a,{size:"large",tip:"Initialize..."})})})},Ct=n(130),Lt=n(48),Et=n(90),kt=n(118),wt=Object(kt.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{isLoggedInStatusChangedAC:function(t,e){t.isLoggedIn=e.payload.value}}}),_t=wt.reducer,Nt=(wt.actions.isLoggedInStatusChangedAC,Object(Lt.b)({app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/STATUS_CHANGED":case"APP/ISINITIALIZED_CHANGED":case"APP/IS_LOGGED_IN_CHANGED":case"APP/ERROR_DETECTED":return Object(f.a)(Object(f.a)({},t),e.payload);default:return t}},auth:_t,todolist:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODOLIST/ADDED_TODOLIST":return[Object(f.a)(Object(f.a)({},e.payload),{},{filter:"all",entityStatus:"idle"})].concat(Object(_.a)(t));case"TODOLIST/DELETED_TODOLIST":return t.filter((function(t){return t.id!==e.payload.todolistId}));case"TODOLIST/CHANGED_TODOLIST_TITLE":return t.map((function(t){return t.id===e.payload.todolistId?Object(f.a)(Object(f.a)({},t),{},{title:e.payload.title}):t}));case"TODOLIST/CHANGED_TODOLIST_FILTER":return t.map((function(t){return t.id===e.payload.todolistId?Object(f.a)(Object(f.a)({},t),{},{filter:e.payload.filter}):t}));case"TODOLIST/CHANGED_TODOLIST_STATUS":return t.map((function(t){return t.id===e.payload.todolistId?Object(f.a)(Object(f.a)({},t),{},{entityStatus:e.payload.entityStatus}):t}));case"TODOLIST/SETTLED_TODOLISTS":return[].concat(Object(_.a)(t),Object(_.a)(e.payload.todolists.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{filter:"all",entityStatus:"idle"})}))));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASKS/SET_TASKS":return Object(f.a)(Object(f.a)({},t),{},Object(ut.a)({},e.payload.todolistId,Object(_.a)(e.payload.tasks)));case"TASKS/ADDED_TASK":return Object(f.a)(Object(f.a)({},t),{},Object(ut.a)({},e.payload.task.todoListId,[].concat(Object(_.a)(t[e.payload.task.todoListId]),[Object(f.a)({},e.payload.task)])));case"TASKS/DELETED_TASK":return Object(f.a)(Object(f.a)({},t),{},Object(ut.a)({},e.payload.todolistId,Object(_.a)(t[e.payload.todolistId].filter((function(t){return t.id!==e.payload.taskId})))));case"TASKS/UPDATED_TASK":return Object(f.a)(Object(f.a)({},t),{},Object(ut.a)({},e.payload.model.todoListId,Object(_.a)(t[e.payload.model.todoListId].map((function(t){return t.id===e.payload.model.id?Object(f.a)(Object(f.a)({},t),e.payload.model):t})))));default:return t}}})),Pt=Object(kt.a)({reducer:Nt,middleware:function(t){return t().prepend(Et.a)}});window.__store__=Pt;l.a.render(Object(V.jsx)(Ct.a,{children:Object(V.jsx)(d.a,{store:Pt,children:Object(V.jsx)(At,{})})}),document.getElementById("root"))},213:function(t,e,n){t.exports={card:"Todolist_card__2FZ3x"}},224:function(t,e,n){},226:function(t,e,n){}},[[1899,1,2]]]);
//# sourceMappingURL=main.7f230b60.chunk.js.map